webpackJsonp([1],{"/XG8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={name:"recover-identity",components:{},data:function(){return{privateKey:"",error:!1,errorMessage:"",isLoading:!1}},methods:{validatePrivateKey:function(e){return e.length>10},restoreIdentity:function(e){var t=this;if(e.preventDefault(),event.target.files&&event.target.files[0]){var n=event.target.files[0].path;i.a.recoverIdentityFile(n).then(function(e){"OK"===e.status?t.$router.push("loading-identity"):(t.error=!0,t.errorMessage="Your uploaded identity is not valid")})}else this.validatePrivateKey(this.privateKey)?i.a.recoverIdentityKey(this.privateKey).then(function(e){"OK"===e.status?(t.error=!1,t.$router.push("loading-identity")):(t.error=!0,t.errorMessage="Your uploaded identity is not valid")}):(this.error=!0,this.errorMessage="Please fill in a valid KEY or upload your identity file")}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-recover-identity bg-corner"},[n("article",[e._m(0),e._v(" "),n("form",{staticClass:"form",class:{"is-loading":e.isLoading}},[n("fieldset",[n("label",{staticClass:"ui-input-recover-label",attrs:{for:"file"}},[e._v("Click to upload your identity")]),e._v(" "),n("input",{staticClass:"ui-input-recover",attrs:{type:"file",name:"file",id:"file"},on:{change:function(t){e.restoreIdentity(t)}}})]),e._v(" "),n("p",{staticClass:"page-subtitle"},[e._v("\n                or\n            ")]),e._v(" "),n("fieldset",[n("label",{staticClass:"ui-label",attrs:{for:"privateKey"}},[e._v("\n                    Paste your private key\n                ")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.privateKey,expression:"privateKey"}],staticClass:"ui-input",attrs:{name:"privateKey",id:"privateKey"},domProps:{value:e.privateKey},on:{input:function(t){t.target.composing||(e.privateKey=t.target.value)}}}),e._v(" "),e.error?n("div",{staticClass:"error"},[n("p",[e._v(e._s(e.errorMessage))])]):e._e(),e._v(" "),n("button",{staticClass:"ui-button primary",on:{click:e.restoreIdentity}},[e._v("Restore\n                ")]),e._v(" "),n("router-link",{staticClass:"anchor color-blue",attrs:{to:"/create-identity"}},[e._v("\n                    Go back\n                ")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h1",{staticClass:"page-title"},[this._v("\n                Recover your identity\n            ")])])}]};var r=n("VU/8")(s,a,!1,function(e){n("XKfk")},"data-v-c5f106ca",null);t.default=r.exports},"2mV7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("gNcp"),s={};i.keys().forEach(function(e){"./index.js"!==e&&(s[e.replace(/(\.\/|\.js)/g,"")]=i(e).default)}),t.default=s},"4FFo":function(e,t){},"5qmU":function(e,t){},"7DSg":function(e,t){},"7QQ7":function(e,t){},"90Rz":function(e,t,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r=n("H/Zg"),o={components:{userFirstLetter:n("kdpg").a},computed:s()({},Object(a.c)(["getIdentity"])),methods:s()({},Object(a.b)(["updateIdentity"]),{checkIdentity:function(){return!!this.getIdentity.name}}),created:function(){var e=this;this.checkIdentity()||r.a.getIdentity().then(function(t){"OK"===t.status&&e.updateIdentity(t.result[0])}).catch(function(e){console.log(e)})}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"user-identity"},[t("user-first-letter",{attrs:{name:this.getIdentity.name}}),this._v(" "),t("div",{staticClass:"user-name"},[this._v(this._s(this.getIdentity.name))])],1)},staticRenderFns:[]};var l=n("VU/8")(o,c,!1,function(e){n("5qmU")},"data-v-2f69ffe0",null).exports,u={computed:s()({},Object(a.c)(["connectionStatus"])),components:{UserIdentity:l}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("div",{staticClass:"header-right"},[t("user-identity"),this._v(" "),t("div",{staticClass:"connection-status",class:this.connectionStatus.status})],1)])},staticRenderFns:[]};var g=n("VU/8")(u,d,!1,function(e){n("7DSg")},"data-v-3edf3658",null);t.a=g.exports},BNIH:function(e,t){},C2Hz:function(e,t){},DyPr:function(e,t){},FfPo:function(e,t){},"H/Zg":function(e,t,n){"use strict";var i=n("mvHQ"),s=n.n(i),a={removeFriend:function(e){return fetch(this.makeApiEndpoint("friend/remove"),{method:"DELETE",body:s()({global_id:e})}).then(function(e){return e.json()})},addFriend:function(e){return fetch(this.makeApiEndpoint("friend/add"),{method:"POST",body:s()({idurl:e})}).then(function(e){return e.json()})},observeUser:function(e){return fetch(this.makeApiEndpoint("user/observe/"+e,"attempts=4")).then(function(e){return e.json()})},searchUser:function(e){return fetch(this.makeApiEndpoint("user/search/"+e)).then(function(e){return e.json()})},userList:function(){return fetch(this.makeApiEndpoint("friend/list")).then(function(e){return e.json()})},networkConnected:function(){return fetch(this.makeApiEndpoint("network/connected")).then(function(e){return e.json()})},serviceStop:function(e){return fetch(this.makeApiEndpoint("service/stop"+e),{method:"POST"}).then(function(e){return e.json()})},serviceStart:function(e){return fetch(this.makeApiEndpoint("service/start"+e),{method:"POST"}).then(function(e){return e.json()})},recoverIdentityFile:function(e){return fetch(this.makeApiEndpoint("identity/recover"),{method:"POST",body:s()({private_key_local_file:e})}).then(function(e){return e.json()})},recoverIdentityKey:function(e){return fetch(this.makeApiEndpoint("identity/recover"),{method:"POST",body:s()({private_key_source:e})}).then(function(e){return e.json()})},createIdentity:function(e){return fetch(this.makeApiEndpoint("identity/create"),{method:"POST",body:s()({username:e})}).then(function(e){return e.json()})},getIdentity:function(){return fetch(this.makeApiEndpoint("identity/get")).then(function(e){return e.json()})},eventsSend:function(e){return fetch(this.makeApiEndpoint("event/send"+e),{method:"POST",body:s()({request:"hello"})}).then(function(e){return e.json()})},eventsListen:function(){return fetch(this.makeApiEndpoint("event/listen/electron")).then(function(e){return e.json()})},shareFile:function(e,t){return fetch(this.makeApiEndpoint("share/grant"),{method:"PUT",body:s()({trusted_global_id:t.global_id,key_id:e.key_id})}).then(function(e){return e.json()})},createFileShareKey:function(){return fetch(this.makeApiEndpoint("share/create"),{method:"POST"}).then(function(e){return e.json()})},getSharedKeys:function(){return fetch(this.makeApiEndpoint("share/list")).then(function(e){return e.json()})},getSharedFiles:function(){return fetch(this.makeApiEndpoint("file/list","all_customers=1")).then(function(e){return e.json()})},getFiles:function(){return fetch(this.makeApiEndpoint("file/list")).then(function(e){return e.json()})},getFileInfo:function(e){var t="remote_path="+e.key_id+":"+e.path;return fetch(this.makeApiEndpoint("file/info",t)).then(function(e){return e.json()})},createPath:function(e,t){return fetch(this.makeApiEndpoint("file/create"),{method:"POST",body:s()({remote_path:t+":"+e})}).then(function(e){return e.json()})},createFile:function(e,t){return fetch(this.makeApiEndpoint("file/upload/start"),{method:"POST",body:s()({remote_path:e,local_path:t})}).then(function(e){return e.json()})},deleteFile:function(e){return fetch(this.makeApiEndpoint("file/delete"),{method:"delete",body:s()({remote_path:e})})},downloadFile:function(e){var t=this;return this.getPath().then(function(n){return fetch(t.makeApiEndpoint("file/download/start"),{method:"POST",body:s()({remote_path:e})})})},getPath:function(){return fetch(this.makeApiEndpoint("config/get/paths/restore")).then(function(e){return e.json()})},setPath:function(e){return fetch(this.makeApiEndpoint("config/set/paths/restore"),{method:"POST",body:s()({value:e})}).then(function(e){return e.json()})},makeApiEndpoint:function(e,t){if(e)return t?this.constants.API_URL+":"+this.constants.PORT+"/"+e+"/"+this.constants.API_VERSION+"?"+t:this.constants.API_URL+":"+this.constants.PORT+"/"+e+"/"+this.constants.API_VERSION},constants:{PORT:"8180",API_URL:"http://localhost",API_VERSION:"v1"}};t.a=a},HknJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={state:{messages:[]},mutations:{UPDATE_MESSAGES:function(e,t){t.result&&t.result.length&&e.messages.push(t.result[0])},ADD_MESSAGE:function(e,t){e.messages.push(t)}},getters:{getMessages:function(e){return e.messages}},actions:{addMessage:function(e,t){(0,e.commit)("ADD_MESSAGE",t)}},constants:{}}},I4Mg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={isFriendChatOpen:!1,currentFriend:{},friendsList:[],friendsListClone:[]},a={getFriends:function(e){return e.friendsList},isFriendChatOpen:function(e){return e.isFriendChatOpen},currentFriend:function(e){return e.currentFriend},getCurrentFriendData:function(){return s.friendsList?s.friendsList.filter(function(e){return e.global_id===s.currentFriend.global_id}):[]}},r={removeFriend:function(e,t){e.commit;var n=e.dispatch;i.a.removeFriend(t).then(function(e){n("getApiFriends"),n("closeFriend")})},getApiFriends:function(e){var t=e.commit;i.a.userList().then(function(e){t("UPDATE_FRIENDS",e.result)})},openFriend:function(e,t){var n=e.commit;n("UPDATE_CURRENT_FRIEND",t.global_id),n("UPDATE_IS_FRIEND_OPEN",!0)},closeFriend:function(e){(0,e.commit)("UPDATE_IS_FRIEND_OPEN",!1)}};t.default={state:s,getters:a,mutations:{UPDATE_IS_FRIEND_OPEN:function(e,t){e.isFriendChatOpen=t},UPDATE_CURRENT_FRIEND:function(e,t){e.currentFriend=e.friendsList.filter(function(e){return e.global_id===t})[0]},UPDATE_FRIENDS:function(e,t){e.friendsList=t}},actions:r,constants:{}}},IcnI:function(e,t,n){"use strict";var i=n("7+uW"),s=n("NYxO"),a=n("2mV7");i.a.use(s.a),t.a=new s.a.Store({modules:a.default,strict:!1})},KnDA:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),s=n("H/Zg"),a=n("mdtg"),r=n("IcnI"),o=n("/ocq");i.a.use(o.a);var c=new o.a({routes:[{path:"/",name:"loading",component:n("PGcd").default},{path:"/home",name:"home",component:n("j7e0").default},{path:"/create-identity",name:"create-identity",component:n("eFTo").default},{path:"/recover-identity",name:"recover-identity",component:n("/XG8").default},{path:"/users",name:"users",component:n("a32x").default},{path:"/settings",name:"settings",component:n("VKKr").default},{path:"/dead",name:"dead",component:n("lg9s").default},{path:"/loading-identity",name:"loading-identity",component:n("h47Z").default},{path:"*",redirect:"/"}]}),l=0,u={keepConnection:function(){var e=this;s.a.networkConnected().then(function(t){r.a.commit("UPDATE_IS_CONNECTED",t),setTimeout(function(){e.keepConnection()},2e3)}).catch(function(){(l+=1)>5&&c.push("dead"),setTimeout(function(){e.keepConnection()},1e3)})},eventsListen:function(){var e=this;s.a.eventsListen().then(function(t){r.a.commit("UPDATE_LAST_EVENT",t),e.eventsListen()})},messagesListen:function(){var e=this;a.a.getMessages().then(function(t){r.a.commit("UPDATE_MESSAGES",t),e.messagesListen()})}},d={name:"bitdust-web",created:function(){u.keepConnection(),u.eventsListen(),u.messagesListen()}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},f=n("VU/8")(d,g,!1,null,null,null).exports;n("zZM0");i.a.config.productionTip=!1,new i.a({el:"#app",router:c,store:r.a,components:{App:f},template:"<App/>"})},PGcd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("H/Zg"),r=n("NYxO"),o={name:"loading",computed:s()({},Object(r.c)(["connectionStatus"])),methods:s()({},Object(r.b)(["updateIdentity"])),watch:{connectionStatus:function(e){var t=this;"OK"!==e.status?"identity_not_exist"===e.reason&&this.$router.push("create-identity"):a.a.getIdentity().then(function(e){"OK"===e.status?(t.updateIdentity(e.result[0]),t.$router.push("home")):t.$router.push("create-identity")}).catch(function(e){console.log(e)})}}},c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"bg-wave section-loading"},[t("article",[t("header",[t("div",{staticClass:"loading-wrapper"},[t("img",{staticClass:"loading",attrs:{src:n("SE3R")}})]),this._v(" "),t("h1",{staticClass:"page-title"},[this._v("\n                Connecting you\n            ")]),this._v(" "),t("h2",{staticClass:"page-subtitle"},[this._v("\n                one moment please\n            ")])])])])}]};var l=n("VU/8")(o,c,!1,function(e){n("qfqL")},"data-v-a1d96eb4",null);t.default=l.exports},RvJg:function(e,t){},SE3R:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjQiIHg9IjI1IiB5PSIyNSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cj0iMC41cyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb209IjAgNTAgNTAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz0iMTgwIDUwIDUwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0icm90YXRlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9InN0cm9rZUJveCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZVR5cGU9IlhNTCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luPSJyZWN0Qm94LmVuZCIvPgogICAgICAgICAgICAgICAgICAgICAgICA8L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjI3IiB5PSIyNyIgZmlsbD0iI2ZmZiIgd2lkdGg9IjQ2IiBoZWlnaHQ9IjUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iaGVpZ2h0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXI9IjEuM3MiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZVR5cGU9IlhNTCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT0iNTAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPSIwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0icmVjdEJveCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iZnJlZXplIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbj0iMHM7c3Ryb2tlQm94LmVuZCIvPgogICAgICAgICAgICAgICAgICAgICAgPC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDwvc3ZnPgo="},VKKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("H/Zg"),r=n("bwGm"),o=n("90Rz"),c=n("NYxO"),l=n("7+uW"),u={name:"users",data:function(){return{localPath:"",downloadPath:""}},components:{navigation:r.a,bitHeader:o.a},methods:{setDownloadPath:function(){var e=this;a.a.setPath(this.downloadPath).then(function(t){"OK"===t.status&&e.getPath()})},getPath:function(){var e=this;a.a.getPath().then(function(t){e.localPath=t.result[0].value})}},computed:s()({},Object(c.c)(["getEvents"])),created:function(){this.getPath()}};l.a.filter("date",function(e){if(e)return new Date(1e3*e)});var d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings page"},[n("bit-header"),e._v(" "),n("div",{staticClass:"container"},[n("navigation"),e._v(" "),n("div",{staticClass:"content"},[n("h1",{staticClass:"title"},[e._v("\n                SETTINGS\n            ")]),e._v(" "),n("h2",{staticClass:"local-path"},[e._v("Local path: "+e._s(e.localPath))]),e._v(" "),n("h2",{staticClass:"local-path"},[e._v("\n                Set new path "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.downloadPath,expression:"downloadPath"}],staticClass:"ui-input",domProps:{value:e.downloadPath},on:{input:function(t){t.target.composing||(e.downloadPath=t.target.value)}}}),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:e.setDownloadPath}},[e._v("ok\n                ")])]),e._v(" "),n("h2",{staticClass:"events-title"},[e._v("Events - total ("+e._s(e.getEvents.length)+")")]),e._v(" "),n("ul",{staticClass:"event-list"},e._l(e.getEvents,function(t){return n("li",[e._v("\n                    "+e._s(t.status)+"\n                    "),e._l(t.result,function(t){return n("div",[e._v("\n                        "+e._s(t.id)+"\n                        "+e._s(e._f("date")(t.time))+"\n                    ")])})],2)}))])],1)],1)},staticRenderFns:[]};var g=n("VU/8")(u,d,!1,function(e){n("mOHP")},"data-v-7f4d6eae",null);t.default=g.exports},XKfk:function(e,t){},XSFQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("IcnI"),s={isLoaded:!1,hasIdentity:!1,identity:{},connectionStatus:{status:"ERROR"},events:[],lastEvent:{status:void 0}},a={UPDATE_IS_LOADED:function(e,t){e.isLoaded=t},UPDATE_HAS_IDENTITY:function(e,t){e.hasIdentity=t},UPDATE_IS_CONNECTED:function(e,t){e.connectionStatus=t},UPDATE_LAST_EVENT:function(e,t){e.lastEvent=t,i.a.commit("UPDATE_EVENTS",t)},UPDATE_EVENTS:function(e,t){e.events.unshift(t)},UPDATE_IDENTITY:function(e,t){e.identity=t}};t.default={state:s,mutations:a,getters:{connectionStatus:function(e){return e.connectionStatus},getLastEvent:function(e){return e.lastEvent},getEvents:function(e){return e.events},getIdentity:function(e){return e.identity}},actions:{updateIdentity:function(e,t){(0,e.commit)("UPDATE_IDENTITY",t)}},constants:{}}},a32x:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r=n("H/Zg"),o=n("bwGm"),c=n("90Rz"),l=n("kdpg"),u={name:"userMessages",components:{userFirstLetter:l.a},computed:s()({},Object(a.c)(["currentFriend","getMessages"]),{userMessages:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){if(t)return t.sender.toLowerCase().includes(e.currentFriend.global_id.toLowerCase())||t.recipient.toLowerCase().includes(e.currentFriend.global_id.toLowerCase())}).reverse()}})},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend-messages"},[0===e.userMessages.length?n("div",{staticClass:"no-messages-here"},[e._v("\n        No messages here...\n    ")]):e._e(),e._v(" "),n("ul",e._l(e.userMessages,function(t){return n("li",{class:{mine:t.sender!==e.currentFriend.global_id}},[n("p",{staticClass:"message"},[e._v(e._s(t.data.message))]),e._v(" "),n("p",{staticClass:"message-time"},[e._v(e._s(new Date(1e3*t.time).toLocaleString()))]),e._v(" "),t.sender===e.currentFriend.global_id?n("div",{staticClass:"sender"},[n("user-first-letter",{attrs:{name:e.currentFriend.username}})],1):e._e()])}))])},staticRenderFns:[]};var g=n("VU/8")(u,d,!1,function(e){n("ibHC")},"data-v-d0d1f992",null).exports,f=n("mdtg"),h={components:{userMessages:g,userFirstLetter:l.a},data:function(){return{message:"",isSending:!1,isSwitched:!1,chat:""}},methods:s()({},Object(a.b)(["closeFriend","removeFriend","addMessage"]),{sendMessage:function(){var e=this;this.isSending=!0,this.message&&f.a.sendMessage({message:this.message,user:this.currentFriend}).then(function(t){e.isSending=!1,e.resetOpenFriend()}).catch(function(){})},resetOpenFriend:function(){this.message=""},switchUserChat:function(){var e=this;this.isSwitched=!0,setTimeout(function(){e.isSwitched=!1},500)}}),computed:s()({},Object(a.c)(["currentFriend","isFriendChatOpen","getIdentity"])),watch:{currentFriend:function(e){e&&(this.resetOpenFriend(),this.switchUserChat(),this.$refs.chat.focus())},isFriendChatOpen:function(e){e||this.resetOpenFriend()}},mounted:function(){var e=this;window.addEventListener("keyup",function(t){"Escape"===t.code&&e.closeFriend()}),document.addEventListener("keydown",function(t){"Enter"===t.code&&e.sendMessage()})}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend",class:{open:e.isFriendChatOpen,switch:e.isSwitched}},[n("div",{staticClass:"friend-header"},[n("div",[n("user-first-letter",{attrs:{name:e.currentFriend.username}}),e._v(" "),n("h2",[e._v(e._s(e.currentFriend.username))])],1),e._v(" "),n("span",{staticClass:"remove",on:{click:function(t){e.removeFriend(e.currentFriend.global_id)}}},[e._v("remove")]),e._v(" "),n("span",{staticClass:"close",on:{click:e.closeFriend}},[e._v("close")])]),e._v(" "),n("user-messages",{attrs:{from:e.currentFriend}}),e._v(" "),n("div",{staticClass:"flex"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"chat",staticClass:"chat-input",class:{"icon-loading":e.isSending},attrs:{disabled:e.isSending,rows:"1"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),n("button",{staticClass:"send",attrs:{disabled:!e.isSending&&0===this.message.length},on:{click:function(t){e.sendMessage()}}},[e._v("Send\n        ")])])],1)},staticRenderFns:[]};var p=n("VU/8")(h,v,!1,function(e){n("KnDA")},"data-v-73313fc6",null).exports,m={name:"friendMessagesCounter",data:function(){return{hasUnreadMessage:""}},props:["friend"],methods:{},computed:s()({},Object(a.c)(["getMessages","currentFriend","isFriendChatOpen"]),{userMessages:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){return t.sender.toLowerCase().includes(e.friend.global_id.toLowerCase())})},filteredList:function(){var e=this;if(this.getMessages)return this.getMessages.filter(function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})}}),watch:{currentFriend:function(e){this.hasUnreadMessage=!(this.friend.global_id===e.global_id)}},created:function(){}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.userMessages.length>0?t("div",{staticClass:"user-messages"},[t("span",{staticClass:"messages"},[this._v(this._s(this.userMessages.length))])]):this._e()])},staticRenderFns:[]};var C=n("VU/8")(m,_,!1,function(e){n("gMck")},"data-v-27f3a81c",null).exports,I={name:"friends",data:function(){return{activeTab:"myFriends",search:"",searchResults:"",observeSearchAlias:[],addFriendResponse:""}},components:{navigation:o.a,bitHeader:c.a,FriendChat:p,friendMessageCounter:C,userFirstLetter:l.a},computed:s()({},Object(a.c)(["getFriends","getMessages","currentFriend"])),methods:s()({},Object(a.b)(["getApiFriends","openFriend"]),{setMenuActive:function(e){this.activeTab=e},searchUser:function(){var e=this;r.a.searchUser(this.search).then(function(t){e.searchResults=t.result,"exist"===t.result[0].result?e.observeSearchResult(t.result[0].nickname):e.observeSearchAlias=[]})},observeSearchResult:function(e){var t=this;r.a.observeUser(e).then(function(e){t.observeSearchAlias=e.result})},addFriend:function(e){var t=this;r.a.addFriend(e).then(function(e){t.addFriendResponse=e,t.getApiFriends()})}}),watch:{search:function(e){e.length>3&&this.searchUser()}},created:function(){this.getApiFriends()}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friends page"},[n("bit-header"),e._v(" "),n("div",{staticClass:"container"},[n("navigation"),e._v(" "),n("friend-chat"),e._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"sub-menu"},[n("li",{class:{active:"myFriends"===e.activeTab},on:{click:function(t){e.setMenuActive("myFriends")}}},[e._v("MY FRIENDS\n                ")]),e._v(" "),n("li",{staticClass:"separator"}),e._v(" "),n("li",{class:{active:"addFriends"===e.activeTab},on:{click:function(t){e.setMenuActive("addFriends")}}},[e._v("SEARCH OTHER USERS\n                ")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"myFriends"===this.activeTab,expression:"this.activeTab === 'myFriends'"}]},[n("ul",{staticClass:"friends-list"},e._l(e.getFriends,function(t){return n("li",{class:{online:"online"===t.contact_status},on:{click:function(n){e.openFriend(t)}}},[n("user-first-letter",{attrs:{name:t.username}}),e._v("\n\n                        "+e._s(t.username)+"\n\n                        "),n("friend-message-counter",{attrs:{friend:t}}),e._v(" "),t.unread?n("div",{staticClass:"messages"},[e._v("\n                            "+e._s(t.messages.length)+"\n                        ")]):e._e(),e._v(" "),e.currentFriend.global_id===t.global_id?n("div",{staticClass:"icon-chat"}):e._e()],1)}))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"addFriends"===this.activeTab,expression:"this.activeTab === 'addFriends'"}]},[n("label",{staticClass:"search",attrs:{for:"search"}},[e._v("\n                    Search by name:\n                ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{id:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),e.addFriendResponse?n("div",{staticClass:"add-friend-response"},[n("span",{staticClass:"close",on:{click:function(t){e.addFriendResponse=null}}},[e._v("X")]),e._v("\n                    "+e._s(e.addFriendResponse.result[0])+"\n                ")]):e._e(),e._v(" "),n("ul",{staticClass:"friends-list"},e._l(e.searchResults,function(t){return n("li",["exist"===t.result?n("div",[n("span",{staticClass:"icon-add",on:{click:function(n){e.addFriend(t.idurl)}}}),e._v(" "),n("div",[n("p",[e._v(e._s(t.nickname))]),e._v(" "),n("p",[e._v(e._s(t.idurl))])])]):e._e(),e._v(" "),"not exist"===t.result?n("div",[n("span",{staticClass:"icon-invite"},[e._v("invite")]),e._v(" "),n("div",[n("p",[e._v(e._s(t.nickname))])])]):e._e()])})),e._v(" "),e.observeSearchAlias.length>1?n("div",[n("h2",[e._v("Other results")]),e._v(" "),n("ul",{staticClass:"friends-list"},e._l(e.searchResults,function(t){return n("li",[n("span",{staticClass:"icon-add",on:{click:function(n){e.addFriend(t.idurl)}}}),e._v(" "),n("div",[n("p",[e._v(e._s(t.nickname))]),e._v(" "),n("p",[e._v(e._s(t.idurl))])])])}))]):e._e()])])],1)],1)},staticRenderFns:[]};var F=n("VU/8")(I,A,!1,function(e){n("z3no")},"data-v-58cf016e",null);t.default=F.exports},bAnd:function(e,t){},bB6p:function(e,t){},bwGm:function(e,t,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r={computed:s()({},Object(a.c)(["isFileOpen"]))},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("nav",[t("ul",[t("li",[t("router-link",{staticClass:"icon-file",attrs:{to:"/home"}},[this._v("\n                Files\n            ")])],1),this._v(" "),t("li",[t("router-link",{staticClass:"icon-user",attrs:{to:"/users"}},[this._v("\n                Friends\n            ")])],1),this._v(" "),t("li",[t("router-link",{staticClass:"icon-settings",attrs:{to:"/settings"}},[this._v("\n                Settings\n            ")])],1)])])},staticRenderFns:[]};var c=n("VU/8")(r,o,!1,function(e){n("DyPr")},"data-v-4baf5b70",null);t.a=c.exports},eFTo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={name:"create-identity",components:{},data:function(){return{identityName:"",error:"",errorMessage:"",isLoading:!1}},methods:{validateUserName:function(e){return/^[a-z0-9]{2,20}$/.test(e)},createIdentity:function(e){var t=this;e.preventDefault(),this.validateUserName(this.identityName)?(this.isLoading=!0,console.log("creating idendity",this.identityName),i.a.createIdentity(this.identityName).then(function(e){t.isLoading=!1,"OK"===e.status?t.$router.push("loading-identity"):(t.error=!0,t.errorMessage=e.errors[0])})):(this.error=!0,this.errorMessage="Please use a valid user name")}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"bg-wave section-create-identity"},[n("article",[e._m(0),e._v(" "),n("form",{staticClass:"form",class:{"is-loading":e.isLoading}},[n("fieldset",[n("legend",{staticClass:"header"},[e._v("\n                    Please choose your username...\n                ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.identityName,expression:"identityName"}],staticClass:"ui-input",attrs:{name:"identity",placeholder:"username"},domProps:{value:e.identityName},on:{input:function(t){t.target.composing||(e.identityName=t.target.value)}}}),e._v(" "),n("p",{staticClass:"note"},[e._v("Note: only lowercase letters and numbers. Min 3 and max 20 characters")]),e._v(" "),e.error?n("div",{staticClass:"error"},[n("p",[e._v(e._s(e.errorMessage))])]):e._e(),e._v(" "),n("button",{staticClass:"ui-button primary",on:{click:e.createIdentity}},[e._v("Create user\n                ")])]),e._v(" "),n("fieldset",[n("router-link",{staticClass:"anchor color-blue",attrs:{to:"/recover-identity"}},[e._v("Recover an existing identity\n                ")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h1",{staticClass:"page-title"},[this._v("\n                Welcome to BitDust\n            ")])])}]};var r=n("VU/8")(s,a,!1,function(e){n("C2Hz")},"data-v-2ae3c026",null);t.default=r.exports},gMck:function(e,t){},gNcp:function(e,t,n){var i={"./Application.js":"XSFQ","./Files.js":"uoNi","./Friends.js":"I4Mg","./Messages.js":"HknJ","./index.js":"2mV7"};function s(e){return n(a(e))}function a(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id="gNcp"},h47Z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r={name:"loading-identity",computed:s()({},Object(a.c)(["connectionStatus"])),watch:{connectionStatus:function(e){"OK"===e.status&&this.$router.push("home")}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"bg-wave section-loading"},[t("article",[t("div",{staticClass:"loading-wrapper"},[t("img",{staticClass:"loading",attrs:{src:n("SE3R")}})]),this._v(" "),t("h1",{staticClass:"page-title"},[this._v("\n            Loading your identity\n        ")]),this._v(" "),t("h2",{staticClass:"page-subtitle"},[this._v("\n            one moment please\n        ")])])])}]};var c=n("VU/8")(r,o,!1,function(e){n("BNIH")},"data-v-761e5e96",null);t.default=c.exports},ibHC:function(e,t){},j7e0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r=n("H/Zg"),o={name:"fileDetail",data:function(){return{downloadSuccess:!1,downloadError:!1,downloadIsLoading:!1}},props:{file:{type:Object}},methods:s()({},Object(a.b)(["getApiFiles","deleteFile","closeFile"]),{shareFile:function(){alert("Sharing this file: "+this.file.name+"\n \n Wait, Vessel is working on it ;)")},downloadFile:function(){var e=this;this.downloadIsLoading=!0,this.downloadSuccess=!1,this.downloadError=!1,r.a.downloadFile(this.file.remote_path).then(function(t){t.ok?e.downloadSuccess=!0:e.downloadError=!0,e.downloadIsLoading=!1})},resetOpenFile:function(){this.downloadSuccess=!1,this.downloadSuccess=!1,this.downloadError=!1}})},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-detail"},[n("span",{staticClass:"icon-menu"}),e._v(" "),n("div",{staticClass:"file-detail-content"},[n("ul",{staticClass:"file-detail-list"},[n("li",{on:{click:function(t){e.downloadFile()}}},[n("i",{staticClass:"icon-download-file"}),e._v("\n                Download\n            ")]),e._v(" "),n("li",{staticClass:"delete",on:{click:function(t){e.deleteFile(e.file)}}},[n("i",{staticClass:"icon-delete-file"}),e._v("\n                Delete\n            ")])])])])},staticRenderFns:[]};var l=n("VU/8")(o,c,!1,function(e){n("bAnd")},"data-v-d5cedd68",null).exports,u=["aac"," ai","aiff","avi","c","cpp","css","csv","dat","dmg","doc","exe","flv","gif","h","hpp","html","ics","java","jpg","js","key","mid","mp3","mp4","mpg","pdf","php","png","ppt","psd"," py","q","t","rar","rb","rtf","sql","tiff","txt","wav","xls","xml","yml","zip"],d={name:"fileExtension",data:function(){return{}},props:["file"],methods:{getExtension:function(){if(this.file)return this.makeUrl(this.file.match(/[^.]+$/)[0])},makeUrl:function(e){return-1===u.indexOf(e)?"./static/extensions/icon-file-gray.svg":"./static/extensions/"+e+".png"}}},g={render:function(){var e=this.$createElement;return(this._self._c||e)("i",{staticClass:"file-extension",style:{background:"url("+this.getExtension()+")"}})},staticRenderFns:[]};var f=n("VU/8")(d,g,!1,function(e){n("RvJg")},"data-v-23ace58a",null).exports,h={data:function(){return{search:"",isFilesLoading:!0}},components:{FileDetail:l,FileExtension:f},methods:s()({},Object(a.b)(["deleteFile","openFile","getApiFiles"])),computed:s()({},Object(a.c)(["getFiles"]),Object(a.d)(["Files"]),{filteredList:function(){var e=this;if(this.getFiles)return this.isFilesLoading=!1,this.getFiles.filter(function(t){if("."!==t.name.charAt(0))return t.name.toLowerCase().includes(e.search.toLowerCase())})}}),created:function(){this.getApiFiles()}},v={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-files"},[i("label",{staticClass:"search",attrs:{for:"search"}},[e._v("\n        Search\n    ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{placeholder:"type a file name",id:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),e.Files.filesErrorLoading?i("div",{staticClass:"loading-wrapper"},[i("img",{staticClass:"loading",attrs:{src:n("SE3R")}}),e._v(" "),i("p",[e._v("\n            Please wait, loading your files.\n        ")])]):e._e(),e._v(" "),0!==e.filteredList.length||e.Files.filesErrorLoading?e._e():i("div",{staticClass:"no-files"},[e._v("\n        You don't have any file uploaded yet, try to upload your first ;)\n    ")]),e._v(" "),i("ul",e._l(e.filteredList,function(t){return i("li",[i("file-extension",{attrs:{file:t.path}}),e._v(" "),i("span",{staticClass:"file-name",on:{click:function(n){e.openFile(t.path)}}},[e._v(e._s(t.name))]),e._v(" "),i("file-detail",{attrs:{file:t}})],1)}))])},staticRenderFns:[]};var p=n("VU/8")(h,v,!1,function(e){n("kSvn")},"data-v-2eb62cc6",null).exports,m={data:function(){return{isFileOpen:!1,search:""}},components:{FileDetail:l,FileExtension:f},methods:s()({},Object(a.b)(["deleteFile","openFile","getApiSharedFiles"])),computed:s()({},Object(a.c)(["getSharedFiles","getIdentity"]),{filteredList:function(){var e=this;if(this.getSharedFiles)return this.getSharedFiles.filter(function(t){if("."!==t.name.charAt(0))return t.name.toLowerCase().includes(e.search.toLowerCase())&&-1===t.key_id.indexOf(e.getIdentity.global_id)})}}),created:function(){this.getApiSharedFiles()}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-files"},[n("label",{staticClass:"search",attrs:{for:"search"}},[e._v("\n        Search\n    ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{placeholder:"type a file name",id:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),n("ul",e._l(e.filteredList,function(t){return n("li",[n("file-extension",{attrs:{file:t.path}}),e._v(" "),n("span",{staticClass:"file-name",on:{click:function(n){e.openFile(t.path)}}},[e._v(e._s(t.name))]),e._v(" "),n("file-detail",{attrs:{file:t}})],1)})),e._v(" "),e.isFileOpen?n("div",[e._v("\n        open\n    ")]):e._e()])},staticRenderFns:[]};var C=n("VU/8")(m,_,!1,function(e){n("4FFo")},"data-v-528017d6",null).exports,I={data:function(){return{uploadFieldName:""}},methods:s()({},Object(a.b)(["getApiFiles","createFile"])),computed:s()({},Object(a.c)(["getFiles"]))},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropbox"},[e._v("\n    UPLOAD FILE\n    "),n("input",{staticClass:"input-file",attrs:{type:"file",name:e.uploadFieldName},on:{change:function(t){e.createFile(t.target)}}})])},staticRenderFns:[]};var F=n("VU/8")(I,A,!1,function(e){n("pft9")},"data-v-e9254440",null).exports,b={data:function(){return{downloadSuccess:!1,downloadError:!1,downloadIsLoading:!1,isSharingOpen:!1,selectedFriend:"",isSharing:!1}},components:{FileExtension:f,userFirstLetter:n("kdpg").a},methods:s()({},Object(a.b)(["deleteFile","closeFile","getApiFriends","updateCurrentFileData"]),{stopPropagation:function(e){e.preventDefault()},downloadFile:function(){var e=this;this.downloadIsLoading=!0,this.downloadSuccess=!1,this.downloadError=!1,r.a.downloadFile(this.currentFile.remote_path).then(function(t){t.ok?e.downloadSuccess=!0:e.downloadError=!0,e.downloadIsLoading=!1})},resetOpenFile:function(){this.downloadSuccess=!1,this.downloadSuccess=!1,this.downloadError=!1,this.isSharingOpen=!1,this.selectedFriend="",this.isSharing=!1},openShareFile:function(){this.isSharingOpen=!0,this.getApiFriends()},selectFriendToShare:function(e){this.selectedFriend=e},shareFile:function(){var e=this;this.isSharing=!0,r.a.shareFile(this.currentFile,this.selectedFriend).then(function(t){e.resetOpenFile()})},updateFileInfo:function(){var e=this;r.a.getFileInfo(this.currentFile).then(function(t){e.updateCurrentFileData(t.result[0].versions)})}}),computed:s()({},Object(a.c)(["isFileOpen","currentFile","getFriends","connectionStatus"])),watch:{connectionStatus:function(){this.isFileOpen&&this.updateFileInfo()},currentFile:function(e){e&&(this.resetOpenFile(),this.updateFileInfo())},isFileOpen:function(e){e||this.resetOpenFile()}},mounted:function(){var e=this;window.addEventListener("keyup",function(t){"Escape"===t.code&&e.closeFile()})}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-open",class:{open:e.isFileOpen}},[n("div",{staticClass:"file-open-container",on:{click:function(t){e.stopPropagation(t)}}},[n("span",{staticClass:"close",on:{click:e.closeFile}},[e._v("x\n        ")]),e._v(" "),n("div",{staticClass:"flex"},[n("file-extension",{attrs:{file:e.currentFile.path}}),e._v(" "),n("h1",[e._v(e._s(e.currentFile.name))])],1),e._v(" "),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-terciary",on:{click:function(t){e.openShareFile(e.currentFile.path)}}},[e._v("\n                Share\n            ")]),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:e.downloadFile}},[e._v("\n                Download\n            ")]),e._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:function(t){e.deleteFile(e.currentFile)}}},[e._v("\n                Delete\n            ")]),e._v(" "),e.isSharingOpen?n("div",{staticClass:"share-wrapper"},[n("p",{staticClass:"share-text"},[e._v("Please select a friend to share this file:")]),e._v(" "),n("ul",{staticClass:"friends-list"},e._l(e.getFriends,function(t){return n("li",{class:{active:e.selectedFriend.global_id===t.global_id},on:{click:function(n){e.selectFriendToShare(t)}}},[n("user-first-letter",{attrs:{name:t.username}}),e._v("\n                        "+e._s(t.username)+"\n\n                    ")],1)})),e._v(" "),n("div",{staticClass:"share-buttons"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(t){e.isSharingOpen=!1,e.selectedFriend=""}}},[e._v("Cancel\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-terciary btn-share",attrs:{disabled:!e.selectedFriend},on:{click:function(t){e.shareFile()}}},[e._v("Share\n                    ")])])]):e._e(),e._v(" "),e.isSharing?n("p",{staticClass:"is-sharing"},[e._v("\n                Sharing file with: "+e._s(e.selectedFriend.username)+"\n            ")]):e._e(),e._v(" "),e.downloadIsLoading?n("div",[e._v("\n                Loading\n            ")]):e._e(),e._v(" "),e.downloadSuccess?n("div",[e._v("\n                Download "+e._s(e.currentFile.path)+" Success\n            ")]):e._e(),e._v(" "),e.downloadError?n("div",[e._v("\n                Download "+e._s(e.currentFile.path)+" Error\n            ")]):e._e()]),e._v(" "),n("hr"),e._v(" "),e._l(e.currentFile.versions,function(t,i){return n("div",{key:i,staticClass:"file-info"},[e._v("\n            ("+e._s(i+1)+")\n            Available: "+e._s(t.reliable)+"\n            Uploaded: "+e._s(t.delivered)+"\n        ")])})],2),e._v(" "),n("i",{staticClass:"wall",on:{click:e.closeFile}})])},staticRenderFns:[]};var y=n("VU/8")(b,E,!1,function(e){n("7QQ7")},"data-v-2d53e2d5",null).exports,S=n("bwGm"),w=n("90Rz"),O={name:"home",data:function(){return{activeTab:"myFiles"}},components:{userFiles:p,userSharedFiles:C,filesUpload:F,fileOpen:y,navigation:S.a,bitHeader:w.a},methods:{setMenuActive:function(e){this.activeTab=e}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home page"},[n("bit-header"),e._v(" "),n("div",{staticClass:"container"},[n("navigation"),e._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"sub-menu"},[n("li",{class:{active:"myFiles"===e.activeTab},on:{click:function(t){e.setMenuActive("myFiles")}}},[e._v("MY FILES\n                ")]),e._v(" "),n("li",{staticClass:"separator"}),e._v(" "),n("li",{class:{active:"myShares"===e.activeTab},on:{click:function(t){e.setMenuActive("myShares")}}},[e._v("SHARED WITH ME\n                ")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"myFiles"===this.activeTab,expression:"this.activeTab === 'myFiles'"}]},[n("files-upload"),e._v(" "),n("user-files")],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"myShares"===this.activeTab,expression:"this.activeTab === 'myShares'"}]},[n("user-shared-files")],1),e._v(" "),n("file-open")],1)],1)],1)},staticRenderFns:[]};var T=n("VU/8")(O,P,!1,function(e){n("FfPo")},null,null);t.default=T.exports},kSvn:function(e,t){},kdpg:function(e,t,n){"use strict";var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"avatar"},[this._v(this._s(this.userFirstLetter))])},staticRenderFns:[]};var s=n("VU/8")({props:["name"],computed:{userFirstLetter:function(){if(this.name)return this.name.substring(0,1)}}},i,!1,function(e){n("zdln")},"data-v-732adc79",null);t.a=s.exports},lg9s:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r={name:"dead",computed:s()({},Object(a.c)(["connectionStatus"])),watch:{connectionStatus:function(e){"OK"===e.status&&this.$router.push("home")}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"page"},[t("article",[t("div",{staticClass:"dead"},[t("div",{staticClass:"loading-wrapper"},[t("img",{staticClass:"loading",attrs:{src:n("SE3R")}})]),this._v(" "),t("h1",[this._v("\n                Ooops, something went wrong, can you please restart Bitdust\n            ")]),this._v(" "),t("h2",[this._v("Trying to re-connect")])])])])}]};var c=n("VU/8")(r,o,!1,function(e){n("bB6p")},"data-v-83c24dd8",null);t.default=c.exports},mOHP:function(e,t){},mdtg:function(e,t,n){"use strict";var i=n("mvHQ"),s=n.n(i),a=n("H/Zg"),r={sendMessage:function(e){return fetch(a.a.makeApiEndpoint("message/send"),{method:"POST",body:s()({global_id:e.user.global_id,data:{message:e.message}})}).then(function(e){return e.json()})},getMessages:function(){return fetch(a.a.makeApiEndpoint("message/receive/electron_ui_consumer")).then(function(e){return e.json()})}};t.a=r},pft9:function(e,t){},qfqL:function(e,t){},uoNi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("H/Zg"),s={filesList:[],sharedFilesList:[],isFileOpen:!1,currentFile:{},filesErrorLoading:!0},a={getFiles:function(e){return e.filesList},getSharedFiles:function(e){return e.sharedFilesList},isFileOpen:function(e){return e.isFileOpen},currentFile:function(e){return e.currentFile},hasFilePath:function(e){return s.filesList?s.filesList.filter(function(t){return t.path===e}):[]}},r={updateCurrentFileData:function(e,t){(0,e.commit)("UPDATE_CURRENT_FILE_DATA",t)},openFile:function(e,t){var n=e.commit;n("UPDATE_CURRENT_FILE",t),n("UPDATE_IS_FILE_OPEN",!0)},closeFile:function(e){(0,e.commit)("UPDATE_IS_FILE_OPEN",!1)},deleteFile:function(e,t){e.commit;var n=e.dispatch;confirm("Are you sure ?")&&i.a.deleteFile(t.key_id+":"+t.path).then(function(e){console.log("file removed",e),e.ok&&(n("getApiFiles"),n("closeFile"))})},getApiSharedFiles:function(e){var t=e.commit;i.a.getSharedFiles().then(function(e){t("UPDATE_SHARED_FILE_LIST",e.result)})},getApiFiles:function(e){var t=e.commit,n=e.dispatch;i.a.getFiles().then(function(e){"ERROR"===e.status?setTimeout(function(){n("getApiFiles"),t("UPDATE_FILES_ERROR_LOADING",!0),console.log("retrying to get files")},1e3):(t("UPDATE_FILE_LIST",e.result),t("UPDATE_FILES_ERROR_LOADING",!1))})},createFile:function(e,t){e.commit;var n=e.dispatch;if(!t)return!1;var s=t.files[0].path.replace(/\\/g,"/"),r=s.match(/\/([^/]*)$/)[1];if(0===a.hasFilePath(r).length)i.a.createFileShareKey().then(function(e){if(!e.result&&"OK"!==e.status)return!1;var t=e.result[0].key_id;i.a.createPath(r,t).then(function(e){"OK"===e.status&&(i.a.createFile(t+":"+r,s).then(function(e){"OK"===e.status&&console.log("file: ",r,"Created")}).catch(function(e){console.log("error: ",e)}),setTimeout(function(){n("getApiFiles")},500))})});else{var o=a.hasFilePath(r)[0],c=o.key_id+":"+o.path;i.a.createFile(c,s).then(function(e){"OK"===e.status&&console.log("file: ",r,"Created")}).catch(function(e){console.log("error: ",e)}),setTimeout(function(){n("getApiFiles")},500)}}};t.default={state:s,getters:a,mutations:{UPDATE_SHARED_FILE_LIST:function(e,t){e.sharedFilesList=t},UPDATE_FILE_LIST:function(e,t){e.filesList=t},UPDATE_IS_FILE_OPEN:function(e,t){e.isFileOpen=t},UPDATE_CURRENT_FILE:function(e,t){e.currentFile=e.filesList.filter(function(e){return e.name===t})[0]||e.sharedFilesList.filter(function(e){return e.name===t})[0]},UPDATE_CURRENT_FILE_DATA:function(e,t){e.currentFile.versions=t},UPDATE_FILES_ERROR_LOADING:function(e,t){e.filesErrorLoading=t}},actions:r,constants:{}}},z3no:function(e,t){},zZM0:function(e,t){},zdln:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3f4c0bfbb39f6c394930.js.map